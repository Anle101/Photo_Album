(this.webpackJsonpphotoalbum=this.webpackJsonpphotoalbum||[]).push([[0],{47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(41),i=a.n(n),l=(a(47),a(3)),r=(a(48),a(21)),o=a.n(r),j=a(25),b=a(6),u=a(5),m=(a(50),a(89)),d=a(13),p=a.n(d),O=Object(c.createContext)({}),h=a(2);var x=function(e){var t=e.setToken,a=Object(c.useContext)(O).setCurrentProfile,s=Object(c.useContext)(O).CurrentProfile,n=Object(c.useContext)(O).token,i=Object(c.useState)(""),r=Object(l.a)(i,2),d=r[0],x=r[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),v=g[0],N=g[1],y=(Object(b.g)(),function(){var e=Object(j.a)(o.a.mark((function e(c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),n?alert("A user is already logged in!"):p.a.get("https://photo-album-teacup.herokuapp.com/api/getlogin",{params:{user:d,password:v}}).then((function(e){e.data.user[0]?(console.log(e.data.user[0]),t(e.data.token),a(e.data.user[0]),console.log(e.data),console.log(s),localStorage.setItem("user",JSON.stringify(e.data.user[0]))):alert("Incorrect Username/Password!")})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(h.jsxs)(m.a.div,{children:[Object(h.jsx)("div",{className:"background",children:Object(h.jsx)(m.a.div,{initial:{x:-2e3},animate:{x:-400},exit:{x:-2e3},className:"lwall"})}),n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"login-message",children:"You are logged in!"}),Object(h.jsx)(u.b,{to:"/profile",className:"loginbutton redirectbutton",children:" Profile "}),Object(h.jsx)(u.b,{to:"/home",className:"loginbutton redirectbutton2",children:" Home "})]}),!n&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a.form,{initial:{x:0},animate:{x:1200},exit:{x:0},className:"loginform",onSubmit:y,children:Object(h.jsxs)("ul",{className:"userSection",children:[Object(h.jsx)("i",{className:"far fa-bookmark llogo"}),Object(h.jsx)("p",{className:"llogo-font",children:"Photo_Album"}),Object(h.jsx)("li",{children:Object(h.jsx)("input",{type:"text",name:"username",className:"inputfield",placeholder:"Email or Username",onChange:function(e){x(e.target.value)}})}),Object(h.jsx)("li",{children:Object(h.jsx)("input",{type:"password",name:"password",className:"inputfield",placeholder:"Password",onChange:function(e){N(e.target.value)}})}),Object(h.jsxs)("li",{children:[Object(h.jsx)("input",{type:"submit",className:"loginbutton",value:"Login"}),Object(h.jsx)(u.b,{to:"/register",className:"registerlink",children:"Not registered? Click here to join! "})]})]})})})]})};a(78),a(79);var f=function(){return Object(h.jsx)(m.a.div,{className:"edit-button",whileHover:{scale:1.3},children:Object(h.jsxs)(u.b,{to:"/editprofile",className:"tooltip",children:[Object(h.jsx)(m.a.i,{className:"fas fa-address-card camera",whileHover:{scale:1.1,rotate:-30}}),Object(h.jsx)("span",{className:"tooltiptext",children:"Edit your profile!"})]})})};var g=function(){var e=Object(c.useContext)(O).CurrentProfile,t=Object(c.useContext)(O).setCurrentProfile;return Object(c.useEffect)((function(){var a=localStorage.getItem("user");if(console.log(a),a){var c=JSON.parse(a);t(c)}console.log(e)}),[]),console.log(e),Object(h.jsxs)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"profile",children:[Object(h.jsx)("div",{className:"pwall"}),Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsxs)("div",{className:"top-info",children:[Object(h.jsx)("img",{src:null!=e.profile_picture?"/Photo_Album"+e.profile_picture:"/Photo_Albumimages/blank.jpg",alt:"Profile Picture",className:"profile-picture"}),Object(h.jsxs)("div",{className:"basic-info",children:[Object(h.jsxs)("h1",{className:"user-attribute",children:[" ",null!=e.name?e.name:"N/A"]}),Object(h.jsx)("p",{className:"user-attribute",children:null!=e.email?e.email:"N/A"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("h3",{className:"user-attribute",children:["City: ",null!=e.city?e.city:"N/A"]}),Object(h.jsxs)("h3",{className:"user-attribute",children:["Province: ",null!=e.province?e.province:"N/A"]})]})]}),Object(h.jsxs)("div",{className:"bottom-info",children:[Object(h.jsx)("hr",{}),"Details: ",e.details]})]}),Object(h.jsx)(f,{})]})},v=a(90);a(80);var N=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(""),i=Object(l.a)(n,2),r=i[0],o=i[1],j=Object(c.useState)(""),b=Object(l.a)(j,2),d=b[0],O=b[1];return Object(h.jsxs)(m.a.div,{className:"register-section",children:[Object(h.jsx)("div",{className:"background",children:Object(h.jsx)(m.a.div,{initial:{x:2e3},animate:{x:749},exit:{x:2e3},className:"rwall"})}),Object(h.jsx)(m.a.form,{className:"registerform",initial:{x:700},animate:{x:50},exit:{x:700},children:Object(h.jsxs)("ul",{className:"userSection",children:[Object(h.jsx)("i",{className:"far fa-bookmark rlogo"}),Object(h.jsx)("p",{className:"rlogo-font",children:"Photo_Album"}),Object(h.jsx)("li",{children:Object(h.jsx)("input",{type:"text",name:"username",className:"inputfield",placeholder:"Email",onChange:function(e){s(e.target.value)}})}),Object(h.jsx)("li",{children:Object(h.jsx)("input",{type:"password",name:"password",className:"inputfield",placeholder:"Enter Password",onChange:function(e){o(e.target.value)}})}),Object(h.jsx)("li",{children:Object(h.jsx)("input",{type:"password",name:"password",className:"inputfield",placeholder:"Confirm Password",onChange:function(e){O(e.target.value)}})}),Object(h.jsxs)("li",{children:[Object(h.jsx)("button",{className:"registerbutton",onClick:function(){r===d?(console.log("done"),p.a.post("https://photo-album-teacup.herokuapp.com/api/registerverification",{email:a,password:r}).then((function(){alert("Successful Registration"),console.log("done")}))):alert("Passwords are not the same!")},children:"Register"}),Object(h.jsx)(u.b,{to:"/login",className:"registerlink",children:"Already registered? Sign in here! "})]})]})})]})};a(81),a(82);var y=function(e){var t=e.feedItem;return console.log(t.imgPath),Object(h.jsx)("div",{className:"entire-feed",children:Object(h.jsxs)("div",{className:"main-content",children:[Object(h.jsx)(m.a.div,{className:"feed",initial:{rotateZ:180,opacity:0,scale:0},animate:{rotateZ:360,opacity:1,transition:{type:"spring",duration:1},scale:1},exit:{rotateZ:0,opacity:0},whileHover:{scale:1.1},children:Object(h.jsxs)("div",{className:"feed-content",children:[Object(h.jsx)("img",{src:t.imgPath,className:"feed-image"}),Object(h.jsx)("p",{children:t.caption})]})}),Object(h.jsxs)(m.a.div,{className:"post-content",whileHover:{scale:1.1},children:[Object(h.jsx)("img",{src:t.profile_picture?t.profile_picture:"/images/blank.jpg",className:"post-image"}),Object(h.jsxs)("p",{className:"uploader-info",children:["Memory by : ",t.name]})]})]})})};a(83);var k=function(){return Object(h.jsx)(m.a.div,{className:"upload-button",whileHover:{scale:1.3},children:Object(h.jsxs)(u.b,{to:"/upload",className:"tooltip",children:[Object(h.jsx)(m.a.i,{className:"fas fa-camera camera",whileHover:{scale:1.1,rotate:-30}}),Object(h.jsx)("span",{className:"tooltiptext",children:"Create a memory!"})]})})};var S=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),i=Object(l.a)(n,2),r=i[0],o=i[1],j=Object(c.useContext)(O).CurrentProfile,b=Object(c.useContext)(O).setCurrentProfile;Object(c.useEffect)((function(){var e=localStorage.getItem("user");if(console.log(e),e){var t=JSON.parse(e);b(t),console.log(t),p.a.get("https://photo-album-teacup.herokuapp.com/api/getcontent",{params:{user:t.email}}).then((function(e){console.log(e.data.feed),s(e.data.feed),console.log(a[0]),console.log(a),o(!0)})).catch((function(e){console.log(e)}))}console.log("The current profile is "+j.email)}),[]);var d=function(e){var t=e.feedItems;return Object(h.jsx)("div",{children:t.map((function(e){return Object(h.jsx)(y,{feedItem:{imgPath:e.image_dir,caption:e.picture_caption,name:e.name,profile_picture:e.profile_picture}})}))})};return Object(h.jsxs)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[Object(h.jsx)("div",{className:"background",children:Object(h.jsx)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hwall"})}),r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d,{feedItems:a}),Object(h.jsx)(k,{})]}),!r&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"login-warning",children:[Object(h.jsx)("i",{class:"fas fa-heart-broken",style:{fontSize:300,opacity:.1}}),Object(h.jsx)("p",{children:"You need to log in the capture some memories!"}),Object(h.jsx)(u.b,{to:"/login",children:" Login here! "})]})})]})};a(84);var C=function(){var e=Object(c.useContext)(O).CurrentProfile,t=Object(c.useState)(0),a=Object(l.a)(t,2),s=(a[0],a[1]),n=Object(c.useState)(!1),i=Object(l.a)(n,2),r=i[0],o=i[1];Object(c.useEffect)((function(){var e=localStorage.getItem("user");if(console.log(e),e){var t=JSON.parse(e);p.a.get("https://photo-album-teacup.herokuapp.com/api/getcontent",{params:{user:t.email}}).then((function(e){o(!0)})).catch((function(e){console.log(e)}))}}),[]);var j=Object(c.useState)(!1),b=Object(l.a)(j,2),m=b[0],d=b[1],x=Object(c.useState)(!0),f=Object(l.a)(x,2),g=(f[0],f[1]),v=function(){return d(!1)},N=function(){window.innerWidth<=960?g(!1):g(!0)},y=function(){v()};return Object(c.useEffect)((function(){N()}),[]),window.addEventListener("resize",N),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("nav",{className:"navbar",children:Object(h.jsxs)("div",{className:"navbar-container",children:[Object(h.jsxs)(u.b,{to:"/home",className:"navbar-logo",onClick:function(){v()},children:[Object(h.jsx)("i",{class:"far fa-bookmark"})," Photo_Album"]}),Object(h.jsx)("div",{className:"menu-icon",onClick:function(){return d(!m)},children:Object(h.jsx)("i",{className:m?"fas fa-times":"fas fa-bars"})}),Object(h.jsxs)("ul",{className:m?"nav-menu active":"nav-menu",children:[!r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{to:"/register",className:"nav-links",onClick:function(){v()},children:"Register"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{to:"/login",className:"nav-links",onClick:function(){v()},children:"Login"})})]}),r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("li",{className:"user-message",children:[Object(h.jsx)("img",{src:e.profile_picture?e.profile_picture:"/images/blank.jpg",className:"user-image"}),Object(h.jsx)("p",{children:e.name})]}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{to:"/home",className:"nav-links",onClick:y,children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{to:"/profile",className:"nav-links",onClick:y,children:"Profile"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{to:"/home",className:"nav-links",onClick:function(){localStorage.clear(),window.location.reload(),s((function(e){return e+1}))},children:"Logout"})})]})]})]})})})};a(85);var w=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(),i=Object(l.a)(n,2),r=i[0],b=i[1],u=Object(c.useState)(),d=Object(l.a)(u,2),x=(d[0],d[1]),f=Object(c.useState)({}),g=Object(l.a)(f,2),v=(g[0],g[1]),N=Object(c.useState)(),y=Object(l.a)(N,2),k=y[0],S=y[1],C=Object(c.useContext)(O).CurrentProfile,w=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,s,n,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(c=new FormData).append("file",a),c.append("caption",r),c.append("poster",C.user_id),console.log(c),e.prev=6,e.next=9,p.a.post("https://photo-album-teacup.herokuapp.com/api/uploadfile",c,{headers:{"Content-Type":"multipart/form-data"}});case 9:s=e.sent,n=s.data,i=n.fileName,l=n.filePath,console.log(i+" "+l),v({fileName:i,filePath:l}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),500===e.t0.response.status?console.log("server error"):console.log(e.t0.response.data.msg);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[Object(h.jsx)("div",{className:"background",children:Object(h.jsx)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hwall"})}),Object(h.jsx)("form",{onSubmit:w,children:Object(h.jsxs)("div",{className:"upload-form",children:[Object(h.jsx)("h1",{className:"upload-message",children:"Upload a memory!"}),Object(h.jsx)(m.a.div,{className:"upload",whileHover:{scale:1.1},children:Object(h.jsxs)("div",{className:"upload-content",children:[Object(h.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){s(e.target.files[0]),x(e.target.files[0].name),S(URL.createObjectURL(e.target.files[0])),console.log("file set")},className:"upload-imagebutton"}),Object(h.jsx)("img",{src:k,className:"upload-image"}),Object(h.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)},className:"upload-caption"})]})}),Object(h.jsx)("input",{type:"submit",value:"Submit",className:"upload-imagebutton"})]})})]})};a(86);var P=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(),i=Object(l.a)(n,2),r=i[0],b=i[1],u=Object(c.useState)(),d=Object(l.a)(u,2),x=d[0],f=d[1],g=Object(c.useState)(),v=Object(l.a)(g,2),N=v[0],y=v[1],k=Object(c.useState)(),S=Object(l.a)(k,2),C=S[0],w=S[1],P=Object(c.useState)(),_=Object(l.a)(P,2),I=(_[0],_[1]),A=Object(c.useState)(!1),E=Object(l.a)(A,2),F=E[0],L=E[1],H=Object(c.useState)(),J=Object(l.a)(H,2),T=J[0],D=J[1],R=Object(c.useContext)(O).CurrentProfile,U=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(c=new FormData).append("file",a),c.append("name",r),c.append("city",x),c.append("province",N),c.append("details",C),c.append("poster",R.user_id),console.log(c),e.prev=9,e.next=12,p.a.post("https://photo-album-teacup.herokuapp.com/api/editprofile",c,{headers:{"Content-Type":"multipart/form-data"}});case 12:s=e.sent,n=s.data,n.fileName,n.filePath,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),500===e.t0.response.status?console.log("server error"):console.log(e.t0.response.data.msg);case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[Object(h.jsx)("div",{className:"background",children:Object(h.jsx)(m.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hwall"})}),Object(h.jsxs)("form",{onSubmit:U,className:"edit-form",children:[Object(h.jsx)("h1",{className:"edit-message",children:"Edit Profile"}),Object(h.jsx)(m.a.div,{className:"edit",whileHover:{scale:1.03},children:Object(h.jsxs)("ul",{className:"edit-content",children:[Object(h.jsxs)("li",{className:"line",children:[Object(h.jsx)("label",{className:"form-label",children:"Name: "}),Object(h.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)},className:"edit-caption",placeholder:"hi"})]}),Object(h.jsxs)("li",{className:"line",children:[Object(h.jsx)("label",{className:"form-label",children:"City: "}),Object(h.jsx)("input",{type:"text",onChange:function(e){f(e.target.value)},className:"edit-caption"})]}),Object(h.jsxs)("li",{className:"line",children:[Object(h.jsx)("label",{className:"form-label",children:"Province: "}),Object(h.jsx)("input",{type:"text",onChange:function(e){y(e.target.value)},className:"edit-caption"})]}),Object(h.jsxs)("li",{className:"line",children:[Object(h.jsx)("label",{className:"form-label",children:"Details: "}),Object(h.jsx)("textarea",{onChange:function(e){w(e.target.value)},className:"edit-caption"})]}),Object(h.jsx)("li",{className:"line",children:Object(h.jsx)("label",{className:"form-label",children:"Profile Picture: "})}),Object(h.jsx)("li",{className:"line",children:Object(h.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){L(!0),s(e.target.files[0]),I(e.target.files[0].name),D(URL.createObjectURL(e.target.files[0])),console.log("file set")},className:"upload-imagebutton"})}),Object(h.jsx)("li",{className:"line",children:F&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("img",{src:T,className:"preview-profile"})})})]})}),Object(h.jsx)("input",{type:"submit",value:"Submit",className:"edit-imagebutton"})]})]})};var _=function(){var e=Object(c.useState)({}),t=Object(l.a)(e,2),a=t[0],s=t[1],n=function(){var e=Object(c.useState)(function(){var e=localStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(l.a)(e,2),a=t[0],s=t[1];return{setToken:function(e){localStorage.setItem("token",JSON.stringify(e)),s(e.token)},token:a}}(),i=n.token,r=n.setToken,o=Object(c.useState)(),j=(o.LoggedIn,o.setLoggedIn,Object(b.h)());return Object(h.jsx)(v.a,{initial:!1,exitBeforeEnter:!0,children:Object(h.jsx)(b.d,{location:j,children:Object(h.jsx)(O.Provider,{value:{CurrentProfile:a,setCurrentProfile:s,token:i,setToken:r},children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.b,{path:"/login",children:Object(h.jsx)(x,{setToken:r})}),Object(h.jsxs)(b.b,{path:"/upload",children:[Object(h.jsx)(C,{}),Object(h.jsx)(w,{})]}),Object(h.jsx)(b.b,{path:"/register",children:Object(h.jsx)(N,{})}),Object(h.jsxs)(b.b,{path:"/profile",children:[Object(h.jsx)(C,{}),Object(h.jsx)(g,{})]}),Object(h.jsxs)(b.b,{path:"/editprofile",children:[Object(h.jsx)(C,{}),Object(h.jsx)(P,{})]}),Object(h.jsxs)(b.b,{path:"/home",children:[Object(h.jsx)(C,{}),Object(h.jsx)(S,{})]}),Object(h.jsx)(b.b,{exact:!0,path:"/",children:Object(h.jsx)(b.a,{to:"/home"})})]})})},j.pathname)})};i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(u.a,{basename:"/Photo_Album",children:Object(h.jsx)(_,{})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.66b5e67f.chunk.js.map